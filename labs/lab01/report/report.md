---
## Front matter
title: "Отчёт по лабораторной работе №1"
subtitle: "Установка ОС Linux"
author: "Чекмарев Александр Дмитриевич | Группа НПИбд-02-23"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Целью данной работы является приобретение практических навыков установки операционной системы на виртуальную машину, 
настройки минимально необходимых для дальнейшей работы сервисов.


# Выполнение лабораторной работы

## Установка Virtualbox и Linux Fedora Sway Spin 39

Скачаем и установим виртуальную машину через сайт: 
https://www.virtualbox.org/wiki/Downloads

  
![Рис 2.1.1: сайт для скачивания VirtualBox](image/Рисунок2.1.1.png)
    
В моем случае Windows. В установке ничего сложного нет, открываем .exe, выбираем нужный нам диск, где будет установлен VB, соглашаемся со всеми пунктами, ожидаем завершения установки.
Теперь нужно скачать дистрибутив Linux Fedora 39 на сайте: https://fedoraproject.org/spins/sway/download

![Рис 2.1.2: сайт для скачивания iso образа Fedora](image/Рисунок2.1.2.png)

Перейдем непосредственно к установке Линукса на виртуальную машину. 
Открываем VirtualBox, нажимаем на New. После вписываем имя, выбираем место и .iso образ Fedora

![Рис 2.1.3: процесс добавления дистрибутива на VirtualBox](image/Рисунок2.1.3.png)

Указываем сколько нам нужно RAM, желательно выделить больше 4 или более гб и сколько будет использовано ядер процессора

![Рис 2.1.4: настройка озу и ядер](image/Рисунок2.1.4.png)

Ставим 80 гб, как сказано в «Указания к работе» 

![Рис 2.1.5: настройка памяти](image/Рисунок2.1.5.png)


## Установка операционной системы

Запускаем наш Линукс, ожидаем погрузки. Начнем установку, используем комб. win + d

![Рис 2.2.1: демонстрация рабочего стола Linux Fedora](image/Рисунок2.2.1.png)

Начнем установку, используем комб. win + d, ищем (run) liveinst и выбираем его

![Рис 2.2.2: демонстрация окна выбора/запуска приложений](image/Рисунок2.2.2.png)

В следующем окошке нас ожидает выбор языка, выбираем язык

![Рис 2.2.3: выбор языка](image/Рисунок2.2.3.png)

Выбираем диск

![Рис 2.2.4: выбор диска](image/Рисунок2.2.4.png)

Включаем root права, пишем пароль

![Рис 2.2.5: настройка пароля](image/Рисунок2.2.5.png)

Создаем пользователя
    
![Рис 2.2.6: создание пользователя](image/Рисунок2.2.6.png)

Приступаем к установке

![Рис 2.2.7: приступаем к установке Fedora](image/Рисунок2.2.7.png)

Далее после завершения установки перезапускаем виртуальную машину

![Рис 2.2.8: окно перезапуска/вылкючения](image/Рисунок2.2.8.png)

В настройках виртуальной машины, в пункте «Storage» убираем галочку с привода (Remove Disk…), чтобы стало пусто

![Рис 2.2.9: убираем галочку с привода](image/Рисунок2.2.9.png)

При повторном запуске мы вводим данные от нашего аккаунта (пользователя)

![Рис 2.2.10: вход в аккаунт](image/Рисунок2.2.10.png)


## После установки (Настройка Линукса)

Откроем терминал Win+Enter
Переключимся на роль супер-пользователя: sudo -i
    
![Рис 2.3.1: вкл root прав](image/Рисунок2.3.1.png) 

Обновим все пакеты: dnf -y update
    
![Рис 2.3.2: обновление пакетов](image/Рисунок2.3.2.png) 

Установим программы для удобства работы в консоли: dnf -y install tmux mc

![Рис 2.3.3: установка программы](image/Рисунок2.3.3.png) 

При необходимости можно использовать автоматическое обновление.
Установка программного обеспечения: dnf install dnf-automatic

![Рис 2.3.4: установка программного обеспечения](image/Рисунок2.3.4.png) 

Можно задать необходимую конфигурацию в файле /etc/dnf/automatic.conf, но лично для меня это смысла не имеет, так что просто запустим таймер: systemctl enable --now dnf-automatic.timer

![Рис 2.3.5: задаем конфигурацию](image/Рисунок2.3.5.png) 

Отключим SELinux
В данном курсе мы не будем рассматривать работу с системой безопасности SELinux. Поэтому отключим его.
В файле /etc/selinux/config заменим значение SELINUX=enforcing на значение SELINUX=permissive

![Рис 2.3.6: заменяем значение](image/Рисунок2.3.6.png) 

Перегрузим виртуальную машину: reboot

![Рис 2.3.7: перезагрузка вм](image/Рисунок2.3.7.png) 


## Установка драйверов для VirtualBox

Войдем в ОС под заданной вами при установке учётной записью.
Нажмем комбинацию Win+Enter для запуска терминала.
Запустим терминальный мультиплексор tmux: tmux
   
![Рис 2.4.1: запуск tmux](image/Рисунок2.4.1.png)

Переключимся на роль супер-пользователя: sudo -i

![Рис 2.4.2: вкл root](image/Рисунок2.4.2.png)

Установим средства разработки: dnf -y group install "Development Tools"

![Рис 2.4.3: установка средств разработки](image/Рисунок2.4.3.png)

Установим пакет DKMS: dnf -y install dkms

![Рис 2.4.4: установка пакетов](image/Рисунок2.4.4.png)

В меню виртуальной машины подключите образ диска дополнений гостевой ОС.
Подмонтируем диск: mount /dev/sr0 /media

![Рис 2.4.5: подмонитировка диска](image/Рисунок2.4.5.png)

Установим драйвера: /media/VBoxLinuxAdditions.run

![Рис 2.4.6: установка драйверов](image/Рисунок2.4.6.png)

Перегрузим виртуальную машину: reboot


## Настройка раскладки клавиатуры

Войдем в ОС под заданной вами при установке учётной записью.  Нажмем комбинацию Win+Enter для запуска терминала.
Запустим терминальный мультиплексор tmux: tmux
Перед созданием конф файла, создадим sway и config.d:

![Рис 2.5.1: создание папок](image/Рисунок2.5.1.png)
    
Создадим конфигурационный файл ~/.config/sway/config.d/95-system-keyboard-config.conf: 
touch ~/.config/sway/config.d/95-system-keyboard-config.conf

![Рис 2.5.2: создадим конфг файл](image/Рисунок2.5.2.png)

Отредактируем конфигурационный файл ~/.config/sway/config.d/95-system-keyboard-config.conf и впишем туда следующее:
exec_always /usr/libexec/sway-systemd/locale1-xkb-config --oneshot

![Рис 2.5.3: редактирование файла](image/Рисунок2.5.3.png)

Переключимся на роль супер-пользователя: sudo -i

![Рис 2.5.4: вкл root](image/Рисунок2.5.4.png)

Отредактируем конфигурационный файл /etc/X11/xorg.conf.d/00-keyboard.conf: 

![Рис 2.5.5: команда для редактирования с помощью nano](image/Рисунок2.5.5.png)

Section "InputClass"
        Identifier "system-keyboard"
        MatchIsKeyboard "on"
        Option "XkbLayout" "us,ru"
        Option "XkbVariant" ",winkeys"
        Option "XkbOptions" "grp:rctrl_toggle,compose:ralt,terminate:ctrl_alt_bksp"
EndSection

![Рис 2.5.6: редактированный файл](image/Рисунок2.5.6.png)

Для этого можно использовать файловый менеджер mc и его встроенный редактор (или nano).

Перегрузим виртуальную машину: reboot

## Установка имени пользователя и названия хоста
        
Если при установке виртуальной машины вы задали имя пользователя или имя хоста, не удовлетворяющее соглашению об именовании, то вам необходимо исправить это.
Запустим виртуальную машину и залогинимся.
Нажмите комбинацию Win+Enter для запуска терминала.
Запустим терминальный мультиплексор tmux: tmux
Переключимся на роль супер-пользователя: sudo -i
Создадим пользователя (вместо username укажите ваш логин в дисплейном классе): adduser -G wheel username
Зададим пароль для пользователя (вместо username укажите ваш логин в дисплейном классе): passwd username

Действия выше мне делать не нужно, так как у меня все настроено как надо.

Установим имя хоста (вместо username укажите ваш логин в дисплейном классе): hostnamectl set-hostname username

![Рис 2.6.1: установка имени хоста](image/Рисунок2.6.1.png)

 Проверим, что имя хоста установлено верно: hostnamectl
 
![Рис 2.6.2: проверка](image/Рисунок2.6.2.png)

    
## Подключение общей папки
    
Внутри виртуальной машины добавьте своего пользователя в группу vboxsf (вместо username укажите ваш логин): gpasswd -a username vboxsf

![Рис 2.7.1: добавление своего пользователя в группу](image/Рисунок2.7.1.png)

Так как я работаю на windows, то создам папку на нем WorkLinux

В хостовой системе подключим разделяемую папку: 
vboxmanage sharedfolder add "$(id -un)_os-intro" --name=work --hostpath=work –automount

Введем следующее в cmd: 

![Рис 2.7.2: подкл разделяемой папки](image/Рисунок2.7.2.png)

Перегрузим виртуальную машину: reboot

## Установка программного обеспечения для создания документации

Нажмем комбинацию Win+Enter для запуска терминала.
Запустим терминальный мультиплексор tmux: tmux
Переключимся на роль супер-пользователя: sudo -i

**Работа с языком разметки Markdown**

Средство pandoc для работы с языком разметки Markdown.
Установка с помощью менеджера пакетов: dnf -y install pandoc


![Рис 2.8.1: установка пакетов](image/Рисунок2.8.1.png)

Для работы с перекрёстными ссылками мы используем пакет pandoc-crossref.
Пакет pandoc-crossref в стандартном репозитории отсутствует.
Придётся ставить вручную, скачав с сайта https://github.com/lierdakil/pandoc-crossref.
При установке pandoc-crossref следует обращать внимание, для какой версии pandoc он скомпилён.
Лучше установить pandoc и pandoc-crossref вручную.
Скачаем необходимую версию pandoc-crossref (https://github.com/lierdakil/pandoc-crossref/releases). Для нашего нынешнего pandoc v3.1.3

![Рис 2.8.2: демонстрация необходимой версии](image/Рисунок2.8.2.png)

Посмотрим, для какой версии откомпилён pandoc-crossref.
Скачаем соответствующую версию pandoc (https://github.com/jgm/pandoc/releases).
Распакуем архивы.

![Рис 2.8.3: распаковка](image/Рисунок2.8.3.png)

Обе программы собраны в виде статически-линкованных бинарных файлов.
Поместим их в каталог /usr/local/bin.

![Рис 2.8.4: перемещение](image/Рисунок2.8.4.png)

**Texlive**
Установим дистрибутив TeXlive: dnf -y install texlive-scheme-full

![Рис 2.8.5: установка texlive](image/Рисунок2.8.5.png)

# Домашняя работа

Дождитесь загрузки графического окружения и откройте терминал. В окне терминала проанализируйте последовательность загрузки системы, выполнив команду dmesg. Можно просто просмотреть вывод этой команды: dmesg | less

![Рис 3.1.1: анализ последовательности загрузки системы](image/Рисунок3.1.1.png)

Можно использовать поиск с помощью grep: dmesg | grep -i "то, что ищем"

Получите следующую информацию.
Версия ядра Linux (Linux version).

![Рис 3.1.2: версия ядра](image/Рисунок3.1.2.png)

Частота процессора (Detected Mhz processor).

![Рис 3.1.3: частота процессора](image/Рисунок3.1.3.png)

Модель процессора (CPU0).

![Рис 3.1.4: модель процессора](image/Рисунок3.1.4.png)

Объём доступной оперативной памяти (Memory available).

![Рис 3.1.5: озу](image/Рисунок3.1.5.png)

Тип обнаруженного гипервизора (Hypervisor detected).

![Рис 3.1.6: обнаруженный гипервизор](image/Рисунок3.1.6.png)

Тип файловой системы корневого раздела.

![Рис 3.1.7: тип корневого раздела](image/Рисунок3.1.7.png)

Последовательность монтирования файловых систем.

![Рис 3.1.8: последовательность монтирования файлов](image/Рисунок3.1.8.png)


# Контрольные вопросы

1) Какую информацию содержит учётная запись пользователя?
Системное имя, идентификатор пользователя, идентификатор группы,
полное имя, домашний каталог, начальная оболочка.

2) Укажите команды терминала и приведите примеры:

для получения справки по команде; man <команда> (man ls)

для перемещения по файловой системе; cd <каталог> (cd / -перемещение в корневой каталог)

для просмотра содержимого каталога; ls <каталог если нужно> (ls / -содержимое корневого каталога)

для определения объёма каталога; du -s <каталог> (du -s /etc)

для создания / удаления каталогов / файлов;; rm <ключ> <название файла/каталога>

Пустые каталоги можно удалять командой rmdir (если добавить ключ -s, то
можно удалять и не только пустые). Также любые файлы можно удалять
рекурсивно: rm -r <название файла/каталога>

для задания определённых прав на файл / каталог; chmod <xxx> <имя> (chmod 777 filename.txt)

для просмотра истории команд; history

3) Что такое файловая система? Приведите примеры с краткой характеристикой.
Файловая система - это способ организации и хранения данных на носителе информации, таком как жесткий диск или флэш-накопитель. Она определяет способ, которым файлы и каталоги структурируются, и как к ним обращаться.

Вот несколько примеров файловых систем в Linux:

ext4 (Fourth Extended Filesystem): Это одна из наиболее распространенных файловых систем в Linux. Она обеспечивает хорошую производительность и надежность, поддерживает большие размеры файлов и разделов. ext4 является стандартной файловой системой для многих дистрибутивов Linux.

Btrfs (B-tree File System): Это современная файловая система, которая поддерживает функции копирования на запись, снимков и сжатия данных. Btrfs предоставляет возможности по обнаружению и восстановлению поврежденных данных, а также управлению множеством дисков.

XFS (XFS File System): Эта файловая система изначально разработана для высокопроизводительных систем. Она обладает хорошей поддержкой больших файлов и разделов, а также высокой параллельной производительностью ввода-вывода.

ZFS (Zettabyte File System): Хотя ZFS не является частью ядра Linux из коробки из-за проблем лицензирования, он все равно доступен для установки и использования. ZFS предлагает мощные функции, такие как проверка целостности данных, снимки, моментальные копии и встроенное RAID.

F2FS (Flash-Friendly File System): Эта файловая система оптимизирована для использования на флэш-накопителях, таких как SSD. F2FS учитывает особенности флэш-памяти, такие как износ и способы записи, для повышения производительности и срока службы носителя.

4) Как посмотреть, какие файловые системы подмонтированы в ОС?
Командой mount
5) Как удалить зависший процесс?
Узнайте идентификатор процесса (PID): Вы можете использовать команду ps aux | grep <название процесса> для поиска запущенных процессов и их PID. Например:
ps aux | grep firefox
Это покажет список процессов, связанных с Firefox, и их PID.
Используйте команду kill для завершения процесса: Как только вы найдете PID зависшего процесса, используйте команду kill с этим PID для завершения процесса. Например
kill -9 <PID>
-9 это сигнал, который немедленно завершает процесс. Обычно это сработает, если процесс завис, и не реагирует на обычные сигналы завершения.

# Выводы

Я приобрел практические навыки установки операционной системы на виртуальную машину и настройки минимально необходимые для дальнейшей работы с Линуксом.

# Список литературы{.unnumbered}

::: {#refs}
:::
